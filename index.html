<!DOCTYPE html> 
<html lang="fa" dir="rtl"> 
    <head> 
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="نظام تندیس">
    <meta property="og:description" content="پلتفرم تخصصی ارتباط مهندسان و کارفرمایان ساختمانی">
    <meta property="og:image" content="https://shahraavand.ir/images/logoT.png">
    <meta property="og:url" content="https://shahraavand.ir">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="نظام تندیس">
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="نظام تندیس">
    <meta name="twitter:description" content="پلتفرم تخصصی ارتباط مهندسان و کارفرمایان ساختمانی">
    <meta name="twitter:image" content="https://shahraavand.ir/images/logoT.png">
    <!-- SEO Meta Tags -->
    <meta name="description" content="نظام تندیس: پلتفرم تخصصی برای ارتباط مهندسان و کارفرمایان پروژه‌های ساختمانی.">
    <meta name="keywords" content="نظام تندیس, مهندسی ساختمان, شهرآوند, مهندسان, کارفرمایان, پروژه ساختمانی">
    <!-- Favicon -->
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google Sign-In -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <!-- Vazirmatn Font (Google Fonts) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/> 
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>         
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vazir-font@latest/dist/font-face.css"> 
    <!-- Title -->
    <title>نظام تندیس - سیستم ارجاع کار ساختمان</title>
        <style>
            @font-face { 
                font-family: 'Vazir'; 
                src: url('https://cdn.jsdelivr.net/npm/vazir-font@32.105.0/dist/Vazir.woff2') format('woff2'); 
                font-display: swap; 
            } 
            * { 
                margin: 0; 
                padding: 0; 
                box-sizing: border-box; 
                font-family: 'Vazir', sans-serif; 
            } 
            body { 
                background: #f0f2f5; 
                min-height: 100vh; 
                display: flex; 
                flex-direction: column; 
            } 
            .header { 
                display: flex; 
                justify-content: space-between; 
                align-items: center; 
                padding: 20px; 
                background: #fff; 
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); 
                position: fixed; 
                top: 0; 
                width: 100%; 
                z-index: 1000; 
            } 
            .header .logo { 
                font-size: 24px; 
                font-weight: 700; 
                color: #1a1a1a; 
                display: flex;
                align-items: center;
            } 
            .header .logo img {
                width: 75px; /* Adjust logo size to ~80% of original width */
                height: auto; /* Maintain aspect ratio */
            }
            .header .nav { 
                display: flex; 
                align-items: center; 
            } 
            .header .nav a, 
            .header .nav button { 
                margin-left: 20px; 
                text-decoration: none; 
                color: #007aff; 
                font-weight: 400; 
                background: none; 
                border: none; 
                cursor: pointer; 
            } 
            .header .hamburger { 
                display: none; 
                font-size: 24px; 
                cursor: pointer; 
            } 
            .slogan { 
                text-align: center; 
                padding: 20px; 
                background: rgba(248, 248, 248, 0.9); 
                margin: 80px auto 20px; 
                max-width: 900px; 
                border-radius: 10px; 
            } 
            .slogan p { 
                font-size: 18px; 
                font-weight: 500; 
                color: #1a1a1a; 
            } 
            .slogan strong { 
                font-weight: 700; 
                font-size: 22px; 
            } 
            .container { 
                max-width: 900px; 
                width: 90%; 
                background: rgba(255, 255, 255, 0.95); 
                border-radius: 20px; 
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); 
                padding: 40px; 
                margin: 40px auto; 
                text-align: center; 
            } 
            .container .main-switch-container { 
                display: flex; 
                justify-content: center; 
                background: #e5e7eb; 
                border-radius: 20px; 
                padding: 4px; 
                margin-bottom: 30px; 
                width: fit-content; 
                margin-left: auto; 
                margin-right: auto; 
            } 
            .container .main-switch-btn { 
                padding: 8px 16px; 
                background: none; 
                border: none; 
                cursor: pointer; 
                font-size: 14px; 
                color: #1a1a1a; 
                transition: all 0.3s ease; 
                margin: 0; 
            } 
            .container .main-switch-btn.active { 
                background: #007aff; 
                color: #fff; 
                border-radius: 16px; 
            } 
            .container h2 { 
                font-size: 22px; 
                font-weight: 700; 
                color: #1a1a1a; 
                margin-bottom: 30px; 
            } 
            .advantages { 
                display: flex; 
                justify-content: space-between; 
                gap: 20px; 
                margin-bottom: 40px; 
            } 
            .advantage-box { 
                background: rgba(248, 248, 248, 0.9); 
                border-radius: 15px; 
                padding: 20px; 
                width: 32%; 
                text-align: center; 
            } 
            .advantage-box p { 
                font-size: 16px; 
                color: #6b6b6b; 
                margin: 10px 0; 
                position: relative; 
                padding-right: 20px; 
            } 
            .advantage-box p i { 
                color: #007aff; 
                position: absolute; 
                right: 0; 
            } 
            .guide { 
                margin-bottom: 40px; 
            } 
            .guide h2 { 
                font-size: 22px; 
                font-weight: 700; 
                color: #1a1a1a; 
                margin-bottom: 20px; 
                text-align: center; 
            } 
            .steps { 
                display: flex; 
                flex-wrap: wrap; 
                gap: 20px; 
                justify-content: center; 
            } 
            .step { 
                display: flex; 
                flex-direction: column; 
                align-items: center; 
                background: rgba(248, 248, 248, 0.9); 
                border-radius: 15px; 
                padding: 15px; 
                width: 100%; 
                max-width: none; 
                text-align: center; 
            } 
            .step i { 
                font-size: 32px; 
                color: #007aff; 
                margin-bottom: 10px; 
            } 
            .step-text h3 { 
                font-size: 16px; 
                font-weight: 400; 
                color: #1a1a1a; 
                margin-bottom: 5px; 
            } 
            .step-text p { 
                font-size: 14px; 
                color: #6b6b6b; 
            } 
            .buttons { 
                display: flex; 
                justify-content: center; 
            } 
            .btn { 
                width: 100%; 
                max-width: 220px; 
                padding: 14px; 
                font-size: 16px; 
                font-weight: 400; 
                color: #fff; 
                background: #25D366; 
                border: none; 
                border-radius: 5px; 
                cursor: pointer; 
                transition: all 0.3s ease; 
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); 
            } 
            .btn:hover { 
                background: #1ebe57; 
                transform: translateY(-2px); 
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); 
            } 
            .about-section { 
                max-width: 900px; 
                width: 90%; 
                background: rgba(255, 255, 255, 0.95); 
                border-radius: 20px; 
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); 
                padding: 40px; 
                margin: 40px auto; 
                text-align: center; 
            } 
            .about-section h2 { 
                font-size: 22px; 
                font-weight: 700; 
                color: #1a1a1a; 
                margin-bottom: 20px; 
            } 
            .about-section p { 
                font-size: 16px; 
                color: #6b6b6b; 
                margin-bottom: 20px; 
            } 
            .about-section .location { 
                display: flex; 
                justify-content: center; 
                align-items: center; 
                gap: 8px; 
            } 
            .about-section .location i { 
                color: #ea4335; 
                font-size: 18px; 
            } 
            .about-section iframe { 
                max-width: 100%; 
                width: 800px; 
                height: 200px; 
                border: 0; 
            } 
            .contact-section { 
                max-width: 900px; 
                width: 90%; 
                background: rgba(255, 255, 255, 0.95); 
                border-radius: 20px; 
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); 
                padding: 40px; 
                margin: 40px auto; 
                display: flex; 
                gap: 40px; 
            } 
            .contact-left, 
            .contact-right { 
                width: 50%; 
            } 
            .contact-left { 
                display: flex; 
                flex-direction: column; 
                justify-content: center; 
                align-items: center; 
                text-align: center; 
            } 
            .contact-left i { 
                font-size: 32px; 
                color: #007aff; 
                margin-bottom: 10px; 
            } 
            .contact-left h2 { 
                font-size: 22px; 
                font-weight: 700; 
                color: #1a1a1a; 
                margin-bottom: 20px; 
            } 
            .contact-left .contact-text { 
                font-size: 16px; 
                color: #6b6b6b; 
                margin-bottom: 10px; 
            } 
            .contact-left .phone-number { 
                font-size: 24px; 
                color: #1a1a1a; 
                margin-bottom: 10px; 
            } 
            .contact-left .email-text { 
                font-size: 16px; 
                color: #6b6b6b; 
            } 

            /* استایل‌های فرم تماس */
            .contact-form {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .form-row {
                display: flex;
                gap: 15px;
            }

            .form-group {
                flex: 1;
                display: flex;
                flex-direction: column;
            }

            .contact-form input,
            .contact-form textarea {
                width: 100%;
                padding: 12px;
                border: 1px solid #ddd;
                border-radius: 5px;
                font-size: 16px;
                transition: border-color 0.3s;
            }

            .contact-form input:focus,
            .contact-form textarea:focus {
                border-color: #007aff;
                outline: none;
            }

            .contact-form textarea {
                height: 150px;
                resize: vertical;
            }

            .error-message {
                color: #e74c3c;
                font-size: 14px;
                margin-top: 5px;
                display: none;
            }

            .form-actions {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }

            .submit-button {
                background-color: #25D366;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
                transition: background-color 0.3s;
            }

            .submit-button:hover {
                background-color: #1ebe57;
            }

            #form-messages {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }

            .message {
                padding: 12px;
                border-radius: 5px;
                display: flex;
                align-items: center;
                gap: 10px;
                display: none;
            }

            .success-message {
                background-color: #d4edda;
                color: #155724;
            }

            .error-message {
                background-color: #f8d7da;
                color: #721c24;
            }

            .footer { 
                background: #fff; 
                padding: 40px 20px; 
                text-align: center; 
                box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1); 
                margin-top: auto; 
            } 
            .footer .footer-content { 
                display: flex; 
                justify-content: space-around; 
                flex-wrap: wrap; 
                max-width: 900px; 
                margin: 0 auto; 
            } 
            .footer .footer-section { 
                width: 30%; 
                margin-bottom: 20px; 
            } 
            .footer h3 { 
                font-size: 18px; 
                font-weight: 700; 
                color: #1a1a1a; 
                margin-bottom: 15px; 
            } 
            .footer ul { 
                list-style: none; 
                padding: 0; 
            } 
            .footer ul li { 
                margin: 10px 0; 
            } 
            .footer ul li a { 
                text-decoration: none; 
                color: #007aff; 
            } 
            .footer .social-icons a { 
                margin: 0 10px; 
                color: #007aff; 
                font-size: 24px; 
            } 
            .footer .version { 
                font-size: 12px; 
                color: #6b6b6b; 
                margin-top: 20px; 
            } 
            .footer .copyright { 
                font-size: 14px; 
                color: #6b6b6b; 
                margin-top: 10px; 
                text-align: center; 
            } 
            .modal { 
                display: none; 
                position: fixed; 
                z-index: 1001; 
                left: 0; 
                top: 0; 
                width: 100%; 
                height: 100%; 
                background-color: rgba(0,0,0,0.5); 
                justify-content: center; 
                align-items: center; 
            } 
            .modal-content { 
                background-color: #fff; 
                padding: 40px; 
                border-radius: 10px; 
                text-align: center; 
                width: 90%; 
                max-width: 800px; 
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); 
                position: relative; 
            } 
            .modal-header { 
                display: flex; 
                justify-content: flex-end; 
                align-items: flex-start; 
                padding: 0; 
                position: absolute; 
                top: 5px; 
                right: 15px; 
                left: 15px; 
                width: auto; 
            } 
            .modal-header h2 { 
                position: absolute; 
                top: 10px; 
                right: 50px; 
                left: 50px; 
                margin: 0; 
                text-align: right; 
                margin-bottom: 40px; 
            } 
            .close-icon { 
                font-size: 24px; 
                cursor: pointer; 
            } 
            .modal-content h2 { 
                margin-bottom: 40px; 
                font-size: 18px; 
            } 
            .modal-content p { 
                margin-bottom: 30px; 
            } 
            .modal-content button { 
                padding: 10px 20px; 
                background: #25D366; 
                color: #fff; 
                border: none; 
                border-radius: 5px; 
                cursor: pointer; 
                margin-bottom: 30px; 
            } 
            .modal-content button i { 
                margin-right: 5px; 
            } 
            .modal-content button:hover { 
                background: #1ebe57; 
            } 
            .modal-content .small-text { 
                font-size: 12px; 
            } 
            #insertModal .modal-content { 
                width: 95%; 
                max-width: 900px; 
                background: #fff; 
                border-radius: 10px; 
                padding: 20px; 
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); 
            } 
            #insertModal form { 
                display: flex; 
                flex-direction: column; 
                gap: 15px; 
                margin-top: 40px; 
            } 
            #insertModal input, 
            #insertModal textarea, 
            #insertModal select { 
                width: 100%; 
                max-width: 100%; 
                padding: 12px; 
                border: 1px solid #e0e0e0; 
                border-radius: 5px; 
                font-size: 16px; 
                box-sizing: border-box; 
            } 
            #insertModal textarea { 
                height: 120px; 
                resize: none; 
            } 
            #insertModal .progress-bar { 
                display: flex; 
                justify-content: space-between; 
                margin-bottom: 40px; 
                text-align: center; 
            } 
            #insertModal #client-form .progress-bar, 
            #insertModal #engineer-form .progress-bar { 
                margin-bottom: 40px; 
            } 
            #insertModal .progress-step { 
                width: 18%; 
                height: 10px; 
                background: #e0e0e0; 
                border-radius: 5px; 
                transition: background 0.3s; 
            } 
            #insertModal .progress-step.active { 
                background: #25D366; 
            } 
            #insertModal .step-label { 
                font-size: 14px; 
                color: #6b6b6b; 
                margin-top: 15px; 
                display: flex; 
                align-items: center; 
                justify-content: center; 
                height: 30px; 
            } 
            #insertModal .step-label.active { 
                color: #25D366; 
            } 
            #insertModal .step { 
                display: none; 
                width: 100%; 
                box-sizing: border-box; 
            } 
            #insertModal .step.active { 
                display: block; 
                width: 100%; 
                box-sizing: border-box; 
            } 
            #insertModal .step-content { 
                display: grid; 
                grid-template-columns: 1fr 2fr; 
                gap: 20px; 
                width: 100%; 
                padding: 0 20px 20px 0; 
                max-height: calc(50vh - 20px); 
                overflow-y: auto; 
                box-sizing: border-box; 
            } 
            #insertModal .step[data-step="5"] .step-content { 
                display: flex; 
                flex-direction: column; 
                gap: 10px; 
                padding: 20px; 
            } 
            #insertModal .step-content .field-container { 
                display: contents; 
            } 
            #insertModal .step-content .field-container label { 
                text-align: right; 
                font-weight: 500; 
                color: #333; 
            } 
            #insertModal .step-content .field-container input, 
            #insertModal .step-content .field-container textarea, 
            #insertModal .step-content .field-container select { 
                width: 100%; 
            } 
            #insertModal .step-content .field-container select:disabled { 
                background: #f0f0f0; 
                cursor: not-allowed; 
            } 
            #insertModal .nav-buttons { 
                display: flex; 
                justify-content: space-between; 
                margin-top: 20px; 
            } 
            #insertModal .nav-buttons button { 
                padding: 10px 20px; 
                border-radius: 5px; 
                cursor: pointer; 
                display: flex; 
                align-items: center; 
                gap: 5px; 
            } 
            #insertModal .prev-btn { 
                background: #e0e0e0; 
                color: #333; 
            } 
            #insertModal .next-btn { 
                background: #25D366; 
                color: #fff; 
            } 
            #insertModal .submit-btn { 
                background: #4CAF50; 
                color: #fff; 
            } 
            #insertModal .error { 
                color: #D32F2F; 
                font-size: 14px; 
                margin-top: 5px; 
                display: none; 
            } 
            #insertModal .file-upload { 
                border: 2px dashed #ccc; 
                padding: 20px; 
                text-align: center; 
                cursor: pointer; 
                width: 100%; 
                max-width: 100%; 
                box-sizing: border-box; 
            } 
            #insertModal .file-upload.dragover { 
                background: #f0f0f0; 
            } 
            #insertModal .summary { 
                display: flex; 
                flex-direction: column; 
                gap: 10px; 
                text-align: right; 
                font-size: 16px; 
                width: 100%; 
                background: #ffffff00; 
                padding: 10px; 
                border-radius: 5px; 
            } 
            #insertModal .summary .summary-item { 
                display: flex; 
                justify-content: space-between; 
            } 
            #insertModal .summary .summary-item label { 
                font-weight: 700; 
                color: #333; 
            } 
            #insertModal .summary .summary-item span { 
                text-align: right; 
            } 
            #insertModal .gender-switch, 
            .switch-container { 
                display: flex; 
                align-items: center; 
                gap: 10px; 
            } 
            #insertModal .gender-switch label, 
            .switch-container label { 
                display: flex; 
                align-items: center; 
                gap: 5px; 
                cursor: pointer; 
            } 
            #insertModal .gender-switch input[type="checkbox"], 
            .switch-container input[type="checkbox"] { 
                display: none; 
            } 
            #insertModal .gender-switch .toggle, 
            .switch-container .toggle { 
                width: 40px; 
                height: 20px; 
                background: #e0e0e0; 
                border-radius: 20px; 
                position: relative; 
                transition: background 0.3s; 
                cursor: pointer; 
            } 
            #insertModal .gender-switch .toggle::after, 
            .switch-container .toggle::after { 
                content: ''; 
                position: absolute; 
                width: 16px; 
                height: 16px; 
                background: #fff; 
                border-radius: 50%; 
                top: 2px; 
                left: 2px; 
                transition: transform 0.3s; 
            } 
            #insertModal .gender-switch input:checked + .toggle, 
            .switch-container input:checked + .toggle { 
                background: #25D366; 
            } 
            #insertModal .gender-switch input:checked + .toggle::after, 
            .switch-container input:checked + .toggle::after { 
                transform: translateX(20px); 
            } 
            #insertModal .gender-switch .toggle-text { 
                margin-left: 10px; 
                font-size: 14px; 
            } 
            #insertModal .checkbox-container { 
                display: flex; 
                align-items: center; 
                gap: 8px; 
            } 
            #insertModal .checkbox-container input[type="checkbox"] { 
                display: none; 
            } 
            #insertModal .checkbox-container .checkbox { 
                width: 20px; 
                height: 20px; 
                border: 2px solid #ccc; 
                border-radius: 4px; 
                display: flex; 
                align-items: center; 
                justify-content: center; 
                cursor: pointer; 
            } 
            #insertModal .checkbox-container input[type="checkbox"]:checked + .checkbox { 
                background: #25D366; 
                border-color: #25D366; 
            } 
            #insertModal .checkbox-container input[type="checkbox"]:checked + .checkbox::after { 
                content: '\f00c'; 
                font-family: 'Font Awesome 6 Free'; 
                font-weight: 900; 
                color: #fff; 
                font-size: 14px; 
            } 
            #insertModal .checkbox-container span { 
                font-size: 16px; 
            } 
            #insertModal .map-container { 
                position: relative; 
                width: 100%; 
                height: 200px; 
                margin-top: 10px; 
            } 
            #insertModal .map-container .map { 
                width: 100%; 
                height: 100%; 
                border: 1px solid #e0e0e0; 
                border-radius: 5px; 
            } 
            #insertModal .map-container .location-info { 
                font-size: 14px; 
                color: #6b6b6b; 
                margin-top: 5px; 
                text-align: right; 
            } 
            .address-map-container { 
                display: grid; 
                grid-template-columns: 1fr 2fr; 
                gap: 20px; 
                width: 100%; 
            } 
            .address-map-container .labels-row { 
                grid-column: 1 / 3; 
                display: flex; 
                justify-content: space-between; 
                font-size: 14px; 
                color: #6b6b6b; 
                margin-bottom: 10px; 
            } 
            .address-map-container .address-input { 
                display: flex; 
                flex-direction: column; 
            } 
            .address-map-container .address-input textarea { 
                height: 200px; 
            } 
            .map-container { 
                display: flex; 
                flex-direction: column; 
            } 
            #legal-entity-details { 
                display: none; 
                grid-column: 1 / 3; 
                display: grid; 
                grid-template-columns: 1fr 2fr; 
                gap: 20px; 
            } 
            #legal-entity-details label { 
                text-align: right; 
            } 
            #company_details { 
                display: none; 
                grid-column: 1 / 3; 
                display: grid; 
                grid-template-columns: 1fr 2fr; 
                gap: 20px; 
            } 
            #company_details .field-container { 
                display: contents; 
            } 
            #company_details label { 
                text-align: right; 
            } 
            #insertModal .price-header { 
                display: grid; 
                grid-template-columns: 1fr 2fr; 
                gap: 20px; 
                align-items: center; 
            } 
            #insertModal .price-fields .price-grid { 
                display: grid; 
                grid-template-columns: 1fr 2fr; 
                gap: 10px; 
            } 
            @media (max-width: 767px) { 
                .header .nav a { 
                    display: none; 
                } 
                .header .nav.active a { 
                    display: block; 
                    margin: 10px 0; 
                } 
                .header .hamburger { 
                    display: block; 
                } 
                .advantages { 
                    flex-direction: column; 
                } 
                .advantage-box { 
                    width: 100%; 
                } 
                .steps { 
                    flex-direction: column; 
                } 
                .step { 
                    max-width: 100%; 
                } 
                .footer .footer-section { 
                    width: 100%; 
                } 
                .contact-section { 
                    flex-direction: column; 
                    gap: 20px; 
                } 
                .contact-left, 
                .contact-right { 
                    width: 100%; 
                } 
                #insertModal .modal-content { 
                    width: 95%; 
                } 
                #insertModal .step-content { 
                    grid-template-columns: 1fr; 
                    padding: 0 10px 20px 0; 
                } 
                #insertModal .step-content .field-container label { 
                    grid-column: 1; 
                } 
                #insertModal .step-content .field-container div { 
                    grid-column: 1; 
                } 
                #insertModal .summary { 
                    grid-template-columns: 1fr; 
                } 
                .address-map-container { 
                    grid-template-columns: 1fr; 
                } 
                .address-map-container .labels-row { 
                    flex-direction: column; 
                    align-items: flex-end; 
                } 
                #legal-entity-details { 
                    grid-template-columns: 1fr; 
                } 
                #company_details { 
                    grid-template-columns: 1fr; 
                } 
                #insertModal .price-header { 
                    grid-template-columns: 1fr; 
                } 
                #insertModal .price-fields .price-grid { 
                    grid-template-columns: 1fr; 
                } 
                .container .main-switch-container { 
                    width: 100%; 
                } 
            } 
            @media (min-width: 768px) { 
                .advantages { 
                    flex-direction: row; 
                } 
                .advantage-box { 
                    width: 32%; 
                } 
                .steps { 
                    flex-direction: row; 
                } 
                .step { 
                    width: 48%; 
                } 
            } 
            @media (min-width: 1024px) { 
                .step { 
                    width: 23%; 
                } 
            }
        </style>          
    </head>     
    <body> 
        <!-- هدر -->         
        <header class="header"> 
            <div class="logo">
                <img src="images/logoT.png" alt="لوگو شرکت مهندسین مشاور شهرآوند">
                <span>شرکت مهندسین مشاور شهرآوند</span>
            </div>
            <div class="nav"> 
                <button id="insert-btn"></button>                 <a href="#" id="about-link">درباره ما</a> <a href="#" id="contact-link">تماس با ما</a> 
            </div>             <i class="fas fa-bars hamburger" onclick="toggleMenu()"></i> 
        </header>         
        <!-- شعار سایت -->         
        <div class="slogan"> 
            <p id="slogan-text"><strong>نظام تندیس</strong> (تدارک نیازمندی دقیق و یکپارچه ساختمان) برای مهندسان مجری و کمک مجری</p> 
        </div>         
        <!-- کانتینر اصلی -->         
        <div class="container"> 
            <div class="main-switch-container"> 
                <button class="main-switch-btn active" id="main-engineer-btn">من مهندس هستم</button>                 
                <button class="main-switch-btn" id="main-client-btn">نیازمند مهندس هستم</button>                 
            </div>             
            <h2>چرا نظام تندیس؟</h2> 
            <div class="advantages"> 
                <div class="advantage-box">
                    <p id="advantage1"><i class="fas fa-check"></i> دسترسی به پروژه‌های متنوع</p>
                </div>                 
                <div class="advantage-box">
                    <p id="advantage2"><i class="fas fa-check"></i> افزایش درآمد با پروژه‌های بیشتر</p>
                </div>                 
                <div class="advantage-box">
                    <p id="advantage3"><i class="fas fa-check"></i> مدیریت آسان پروژه‌ها</p>
                </div>                 
            </div>             
            <div class="guide"> 
                <h2>چگونه شروع کنیم؟</h2> 
                <div class="steps"> 
                    <div class="step">
                        <i class="fas fa-sign-in-alt"></i>
                        <div class="step-text">
                            <h3>1. ثبت‌نام</h3>
                            <p id="step1-text">به عنوان مهندس ثبت‌نام کنید.</p>
                        </div>
                    </div>                     
                    <div class="step">
                        <i class="fas fa-user-edit"></i>
                        <div class="step-text">
                            <h3>2. تکمیل پروفایل</h3>
                            <p>اطلاعات خود را وارد کنید.</p>
                        </div>
                    </div>                     
                    <div class="step">
                        <i class="fas fa-search"></i>
                        <div class="step-text">
                            <h3>3. جستجو و انتخاب</h3>
                            <p id="step3-text">پروژه‌های مدنظر خود را پیدا کنید.</p>
                        </div>
                    </div>                     
                    <div class="step">
                        <i class="fas fa-handshake"></i>
                        <div class="step-text">
                            <h3>4. توافق و شروع</h3>
                            <p id="step4-text">با کارفرما توافق کرده و پروژه را آغاز کنید.</p>
                        </div>
                    </div>                     
                </div>                 
            </div>             
            <div class="buttons"> 
                <button class="btn" id="start-btn" onclick="openModal()">شروع کن</button>                 
            </div>             
        </div>         
        <!-- پنل درباره ما -->         
        <section class="about-section" id="about-section"> 
            <h2>شرکت مهندسی شهرآوند تبریز</h2> 
            <p>شرکت مهندسی "شهرآوند تبریز" از سال ۱۳۶۰ فعالیت خود را در زمینه طراحی و اجرا در شهر تبریز آغاز کرده است. ما با تکیه بر تجربه و تخصص، پروژه‌های متنوعی را با موفقیت به انجام رسانده‌ایم.</p> 
            <p>این شرکت در نظر دارد که برای تامین نیازمندی‌های پروژه‌ها از مهندسان، از طریق این سایت تسهیل‌سازی کند و این تامین نیازمندی در داخل جامعه مهندسی اتفاق بیافتد.</p> 
            <p class="location"><i class="fas fa-map-marker-alt"></i> آدرس: تبریز، ولیعصر جنوبی، کوچه نیلوفر، پلاک ۳۱، دفتر مهندسی شهرآوند</p> 
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d12620.542719541728!2d46.3499785153125!3d38.045961466444666!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzjCsDAyJzQ1LjUiTiA0NsKwMjEnNDUuMSJF!5e0!3m2!1sfa!2s!4v1698765432100!5m2!1sfa!2s" width="800" height="200" style="border:0;" allowfullscreen="" loading="lazy" alt="نقشه دفتر مهندسی شهرآوند"></iframe>             
        </section>         
        <!-- پنل تماس با ما -->         
        <!-- پنل تماس با ما -->
        <!-- پنل تماس با ما -->
        <section class="contact-section" id="contact-section">
            <div class="contact-left">
                <i class="fas fa-phone"></i>
                <h2>تماس با ما</h2>
                <p class="contact-text">تماس با شماره زیر</p>
                <p class="phone-number">0411-33243750</p>
                <p class="email-text">یا با تکمیل فرم مقابل با ما در ارتباط باشید</p>
            </div>
            <div class="contact-right">
                <form class="contact-form" id="contact-form">
                    <!-- Row 1: Subject and Name -->
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" name="entry.2005620554" id="subject" placeholder="موضوع *" required>
                            <div class="error-message" id="subject-error"></div>
                        </div>
                        <div class="form-group">
                            <input type="text" name="entry.1764112632" id="name" placeholder="نام و نام خانوادگی *" required>
                            <div class="error-message" id="name-error"></div>
                        </div>
                    </div>
            
                    <!-- Row 2: Email and Mobile -->
                    <div class="form-row">
                        <div class="form-group">
                            <input type="email" name="entry.1045781291" id="email" placeholder="ایمیل *" required>
                            <div class="error-message" id="email-error"></div>
                        </div>
                        <div class="form-group">
                            <input type="tel" name="entry.1166974658" id="mobile" placeholder="شماره موبایل * (مثال: 09123456789)" required pattern="09[0-9]{9}" title="شماره موبایل باید 10 رقم باشد و با 09 شروع شود">
                            <div class="error-message" id="mobile-error"></div>
                        </div>
                    </div>
            
                    <!-- Address -->
                    <div class="form-group">
                        <textarea name="entry.1065046570" id="address" placeholder="آدرس (اختیاری)"></textarea>
                    </div>
            
                    <!-- Message -->
                    <div class="form-group">
                        <textarea name="entry.839337160" id="message" placeholder="متن پیام *" required></textarea>
                        <div class="error-message" id="message-error"></div>
                    </div>
            
                    <!-- Submit Button and Messages -->
                    <div class="form-actions">
                        <button type="submit" class="submit-button">ارسال پیام</button>
                        <div id="form-messages">
                            <div id="success-message" class="message success-message">
                                <i class="fas fa-check-circle"></i>
                                <span>پیام شما با موفقیت ارسال شد!</span>
                            </div>
                            <div id="error-message" class="message error-message">
                                <i class="fas fa-exclamation-circle"></i>
                                <span>خطایی رخ داد. لطفاً دوباره تلاش کنید.</span>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </section>
        <!-- فوتر -->         
        <footer class="footer"> 
            <div class="footer-content"> 
                <div class="footer-section"> 
                    <h3>دسترسی سریع</h3> 
                    <ul> 
                        <li>
                            <a href="#">درباره ما</a>
                        </li>                         
                        <li>
                            <a href="#">تماس با ما</a>
                        </li>                         
                    </ul>                     
                </div>                 
                <div class="footer-section"> 
                    <h3>لینک‌های مفید</h3> 
                    <ul> 
                        <li>
                            <a href="https://www.azarnezam.ir/" target="_blank">سازمان نظام مهندسی ساختمان آذربایجان شرقی</a>
                        </li>                         
                        <li>
                            <a href="http://tandisapp.azarnezam.ir/#/login" target="_blank">سامانه رفاهی نظام مهندسی آذربایجان شرقی</a>
                        </li>                         
                        <li>
                            <a href="https://ims.irceo.ir/" target="_blank">سامانه یکپارچه و هوشمند نظام مهندسی ساختمان کشور</a>
                        </li>                         
                        <li>
                            <a href="https://spamak.mrud.ir/" target="_blank">سامانه سپامک - وزارت راه و شهرسازی</a>
                        </li>                         
                        <li>
                            <a href="https://esup.tabriz.ir/sara10/" target="_blank">سامانه جامع مهندسین - شهرداری تبریز</a>
                        </li>                         
                    </ul>                     
                </div>                 
                <div class="footer-section"> 
                    <h3>ما را دنبال کنید</h3> 
                    <div class="social-icons"> <a href="#"><i class="fab fa-instagram"></i></a> <a href="#"><i class="fab fa-telegram"></i></a> <a href="#"><i class="fab fa-linkedin"></i></a> 
                    </div>                     
                </div>                 
            </div>             
            <div class="version">نسخه 2.4 - نظام تندیس - 1404</div>             
            <div class="copyright">محتوی این سایت متعلق به شرکت شهرآوند می باشد</div>             
        </footer>         
        <!-- پنجره ثبت‌نام/ورود -->         
        <div id="signupModal" class="modal"> 
            <div class="modal-content"> 
                <div class="modal-header"> <span class="close-icon" onclick="closeSignupModal()">×</span> 
                    <h2 id="modal-title">خوش آمدید، مهندس گرامی!</h2> 
                </div>                 
                <p> </p> 
                <p>برای ورود یا ثبت‌نام،</p> 
                <p>از اکانت گوگل خود استفاده کنید.</p> 
                <button onclick="googleSignIn()">
                    <i class="fab fa-google"></i>  ورود/ثبت‌نام با گوگل
                </button>                 
                <p class="small-text">نسخه 2.4 - نظام تندیس - 1404</p> 
            </div>             
        </div>         
        <!-- پنجره اطلاعات اضافی -->         
        <div id="additionalInfoModal" class="modal"> 
            <div class="modal-content"> 
                <div class="modal-header"> <span class="close-icon" onclick="closeAdditionalInfoModal()">×</span> 
                    <h2>اطلاعات اضافی</h2> 
                </div>                 
                <form id="additionalInfoForm"> 
                    <input type="text" name="engineer_details" placeholder="جزئیات مهندس *" required> 
                    <input type="text" name="client_details" placeholder="جزئیات کارفرما"> 
                    <button type="submit">اتمام ثبت‌نام</button>                     
                </form>                 
            </div>             
        </div>         
        <!-- پنجره درج اطلاعات مهندس/کارفرما -->         
        <div id="insertModal" class="modal"> 
            <div class="modal-content"> 
                <div class="modal-header"> 
                    <h2 id="insert-modal-title">ثبت‌نام</h2> <span class="close-icon" onclick="closeInsertModal()">×</span> 
                </div>                 
                <form id="insertForm"> 
                    <!-- فرم مهندس -->                     
                    <div id="engineer-form"> 
                        <div class="progress-bar"> 
                            <div class="progress-step active">
                                <span class="step-label active">اطلاعات شخصی</span>
                            </div>                             
                            <div class="progress-step">
                                <span class="step-label">اطلاعات پروانه</span>
                            </div>                             
                            <div class="progress-step">
                                <span class="step-label">اطلاعات حرفه‌ای</span>
                            </div>                             
                            <div class="progress-step">
                                <span class="step-label">آپلود مدارک</span>
                            </div>                             
                            <div class="progress-step">
                                <span class="step-label">تأیید</span>
                            </div>                             
                        </div>                         
                        <!-- مرحله 1: اطلاعات شخصی -->                         
                        <div class="step active" data-step="1"> 
                            <div class="step-content"> 
                                <div class="field-container"> 
                                    <label>نام:</label>                                     
                                    <div> 
                                        <input type="text" name="engineer_first_name" placeholder="نام (حداقل 2 حرف) *" required pattern="[آ-ی]{2,}"> 
                                        <div class="error" id="engineer_first_name_error">نام حداقل باید 2 حرف باشد</div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>نام خانوادگی:</label>                                     
                                    <div> 
                                        <input type="text" name="engineer_last_name" placeholder="نام خانوادگی (حداقل 2 حرف) *" required pattern="[آ-ی]{2,}"> 
                                        <div class="error" id="engineer_last_name_error">نام خانوادگی حداقل باید 2 حرف باشد</div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>تاریخ تولد:</label>                                     
                                    <div> 
                                        <input type="date" name="engineer_birth_date" placeholder="تاریخ تولد *" required> 
                                        <div class="error" id="engineer_birth_date_error">سن باید بالای 18 سال باشد</div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>جنسیت:</label>                                     
                                    <div class="gender-switch"> 
                                        <label> 
                                            <input type="checkbox" name="engineer_gender" id="engineer_gender_switch" onchange="updateEngineerGenderText()"> <span class="toggle"></span> <span class="toggle-text" id="engineer_gender_text">جنسیت: مرد</span> 
                                        </label>                                         
                                        <div class="error" id="engineer_gender_error">لطفاً جنسیت را انتخاب کنید</div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container address-map-container"> 
                                    <div class="labels-row"> 
                                        <label>آدرس محل سکونت</label>                                         
                                    </div>                                     
                                    <div class="address-input"> 
                                        <textarea name="engineer_address" placeholder="آدرس محل سکونت (حداقل 10 کاراکتر) *" required minlength="10"></textarea> 
                                        <div class="error" id="engineer_address_error">آدرس حداقل باید 10 کاراکتر باشد</div>                                         
                                    </div>                                     
                                    <div class="map-container"> 
                                        <div id="engineer-map-residence" class="map"></div>                                         
                                        <div class="location-info" id="engineer-location-info-residence"></div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>تلفن موبایل:</label>                                     
                                    <div> 
                                        <input type="text" name="mobile_phone" placeholder="تلفن موبایل (مثال: 09123456789) *" required pattern="09[0-9]{9}"> 
                                        <div class="error" id="mobile_phone_error">شماره موبایل باید 11 رقم و با 09 شروع شود</div>                                         
                                    </div>                                     
                                </div>                                 
                            </div>                             
                        </div>                         
                        <!-- مرحله 2: اطلاعات پروانه -->                         
                        <div class="step" data-step="2"> 
                            <div class="step-content"> 
                                <div class="field-container"> 
                                    <label>شماره پروانه:</label>                                     
                                    <div> 
                                        <input type="text" name="license_number" placeholder="شماره پروانه *" required pattern="[0-9]+"> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>شماره عضویت:</label>                                     
                                    <div> 
                                        <input type="text" name="membership_number" placeholder="شماره عضویت *" required pattern="[0-9]+"> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>تاریخ شروع اعتبار پروانه:</label>                                     
                                    <div> 
                                        <input type="date" name="license_start_date" placeholder="تاریخ شروع اعتبار پروانه *" required> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>مدت اعتبار پروانه (به ماه):</label>                                     
                                    <div> 
                                        <input type="number" name="license_duration" placeholder="مدت اعتبار پروانه (به ماه) *" required min="1"> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label> 
                                        <div class="checkbox-container"> 
                                            <input type="checkbox" id="has_design_license" name="has_design_license" onchange="toggleDesignLicense()"> <span class="checkbox"></span> <span id="design_license_text">پروانه طراحی ندارم</span> 
                                        </div>                                         
                                    </label>                                     
                                    <div id="design_license_container"> 
                                        <select name="design_license_grade" disabled> 
                                            <option value="">انتخاب کنید</option>                                             
                                            <option value="senior">پایه ارشد</option>                                             
                                            <option value="1">پایه 1</option>                                             
                                            <option value="2">پایه 2</option>                                             
                                            <option value="3">پایه 3</option>                                             
                                        </select>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label> 
                                        <div class="checkbox-container"> 
                                            <input type="checkbox" id="has_supervision_license" name="has_supervision_license" onchange="toggleSupervisionLicense()"> <span class="checkbox"></span> <span id="supervision_license_text">پروانه نظارت ندارم</span> 
                                        </div>                                         
                                    </label>                                     
                                    <div id="supervision_license_container"> 
                                        <select name="supervision_license_grade" disabled> 
                                            <option value="">انتخاب کنید</option>                                             
                                            <option value="senior">پایه ارشد</option>                                             
                                            <option value="1">پایه 1</option>                                             
                                            <option value="2">پایه 2</option>                                             
                                            <option value="3">پایه 3</option>                                             
                                        </select>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label> 
                                        <div class="checkbox-container"> 
                                            <input type="checkbox" id="has_execution_license" name="has_execution_license" onchange="toggleExecutionLicense()"> <span class="checkbox"></span> <span id="execution_license_text">پروانه اجرا ندارم</span> 
                                        </div>                                         
                                    </label>                                     
                                    <div id="execution_license_container"> 
                                        <select name="execution_license_grade" disabled> 
                                            <option value="">انتخاب کنید</option>                                             
                                            <option value="senior">پایه ارشد</option>                                             
                                            <option value="1">پایه 1</option>                                             
                                            <option value="2">پایه 2</option>                                             
                                            <option value="3">پایه 3</option>                                             
                                        </select>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>مجری حقیقی/حقوقی:</label>                                     
                                    <div class="switch-container"> 
                                        <input type="checkbox" id="is_legal_entity" name="is_legal_entity" onchange="toggleLegalEntity()"> 
                                        <label for="is_legal_entity">
                                            <span class="toggle"></span>
                                        </label>                                         <span id="legal_entity_text">مجری حقیقی</span> 
                                    </div>                                     
                                </div>                                 
                                <div id="legal-entity-details" style="display: none;"> 
                                    <div class="field-container"> 
                                        <label>نام شرکت مجری حقوقی:</label>                                         
                                        <div> 
                                            <input type="text" name="legal_entity_name" placeholder="نام شرکت مجری حقوقی"> 
                                        </div>                                         
                                    </div>                                     
                                    <div class="field-container"> 
                                        <label>شماره ثبت:</label>                                         
                                        <div> 
                                            <input type="text" name="legal_entity_reg_number" placeholder="شماره ثبت"> 
                                        </div>                                         
                                    </div>                                     
                                    <div class="field-container"> 
                                        <label>آدرس دفتر شرکت:</label>                                         
                                        <div> 
                                            <textarea name="legal_entity_address" placeholder="آدرس دفتر شرکت"></textarea> 
                                        </div>                                         
                                    </div>                                     
                                </div>                                 
                            </div>                             
                        </div>                         
                        <!-- مرحله 3: اطلاعات حرفه‌ای -->                         
                        <div class="step" data-step="3"> 
                            <div class="step-content"> 
                                <div class="field-container"> 
                                    <label>محل پروژه‌های قبلی:</label>                                     
                                    <div> 
                                        <textarea name="previous_projects" placeholder="محل پروژه‌های قبلی (حداقل 10 کاراکتر) *" required minlength="10"></textarea> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>قیمت پیشنهادی حق الزحمه مهندس مجری (به ازای هر متر مربع زیربنا به تومان):</label>                                     
                                    <div></div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>1 تا 2 طبقه:</label>                                     
                                    <div> 
                                        <input type="text" name="price_1_2" value="107,000" placeholder="قیمت پیشنهادی (تومان) *" required pattern="[0-9,]+"> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>3 تا 5 طبقه:</label>                                     
                                    <div> 
                                        <input type="text" name="price_3_5" value="125,000" placeholder="قیمت پیشنهادی (تومان) *" required pattern="[0-9,]+"> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>6 تا 7 طبقه:</label>                                     
                                    <div> 
                                        <input type="text" name="price_6_7" value="127,800" placeholder="قیمت پیشنهادی (تومان) *" required pattern="[0-9,]+"> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>8 تا 10 طبقه:</label>                                     
                                    <div> 
                                        <input type="text" name="price_8_10" value="139,500" placeholder="قیمت پیشنهادی (تومان) *" required pattern="[0-9,]+"> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>11 تا 12 طبقه:</label>                                     
                                    <div> 
                                        <input type="text" name="price_11_12" value="142,800" placeholder="قیمت پیشنهادی (تومان) *" required pattern="[0-9,]+"> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>13 تا 15 طبقه:</label>                                     
                                    <div> 
                                        <input type="text" name="price_13_15" value="148,800" placeholder="قیمت پیشنهادی (تومان) *" required pattern="[0-9,]+"> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>بالای 16 طبقه:</label>                                     
                                    <div> 
                                        <input type="text" name="price_16_plus" value="159,200" placeholder="قیمت پیشنهادی (تومان) *" required pattern="[0-9,]+"> 
                                    </div>                                     
                                </div>                                 
                                <div class="field-container address-map-container"> 
                                    <div class="labels-row"> 
                                        <label>آدرس دفتر کار</label>                                         
                                    </div>                                     
                                    <div class="address-input"> 
                                        <textarea name="engineer_officeaddress" placeholder="آدرس دفتر کار (حداقل 10 کاراکتر) *" required minlength="10"></textarea> 
                                        <div class="error" id="engineer_officeaddress_error">آدرس حداقل باید 10 کاراکتر باشد</div>                                         
                                    </div>                                     
                                    <div class="map-container"> 
                                        <div id="engineer-map-office" class="map"></div>                                         
                                        <div class="location-info" id="engineer-location-info-office"></div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>تلفن ضروری:</label>                                     
                                    <div> 
                                        <input type="text" name="emergency_phone" placeholder="تلفن ضروری (مثال: 09123456789) *" required pattern="09[0-9]{9}"> 
                                        <div class="error" id="emergency_phone_error">شماره ضروری باید 11 رقم و با 09 شروع شود</div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>توضیحات:</label>                                     
                                    <div> 
                                        <textarea name="description" placeholder="توضیحات"></textarea> 
                                    </div>                                     
                                </div>                                 
                            </div>                             
                        </div>                         
                        <!-- مرحله 4: آپلود مدارک -->                         
                        <div class="step" data-step="4"> 
                            <div class="step-content"> 
                                <div class="field-container"> 
                                    <label>تصویر روی پروانه:</label>                                     
                                    <div> 
                                        <div class="file-upload" id="license_front_upload">
                                            <input type="file" name="license_image_front" accept=".jpg,.png,.pdf" required>تصویر روی پروانه (JPG, PNG, PDF) *
                                        </div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>تصویر پشت پروانه:</label>                                     
                                    <div> 
                                        <div class="file-upload" id="license_back_upload">
                                            <input type="file" name="license_image_back" accept=".jpg,.png,.pdf" required>تصویر پشت پروانه (JPG, PNG, PDF) *
                                        </div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>تصویر کارت نظام مهندسی:</label>                                     
                                    <div> 
                                        <div class="file-upload" id="membership_card_upload">
                                            <input type="file" name="membership_card" accept=".jpg,.png,.pdf" required>تصویر کارت نظام مهندسی (JPG, PNG, PDF) *
                                        </div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>تصویر کارت ملی:</label>                                     
                                    <div> 
                                        <div class="file-upload" id="national_card_upload">
                                            <input type="file" name="national_card" accept=".jpg,.png,.pdf" required>تصویر کارت ملی (JPG, PNG, PDF) *
                                        </div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>تصویر متقاضی:</label>                                     
                                    <div> 
                                        <div class="file-upload" id="applicant_photo_upload">
                                            <input type="file" name="applicant_photo" accept=".jpg,.png" required>تصویر متقاضی (JPG, PNG) *
                                        </div>                                         
                                    </div>                                     
                                </div>                                 
                            </div>                             
                        </div>                         
                        <!-- مرحله 5: تأیید و ارسال -->                         
                        <div class="step" data-step="5"> 
                            <div class="step-content"> 
                                <div class="summary" id="engineer-summary"></div>                                 
                            </div>                             
                        </div>                         
                        <div class="nav-buttons"> 
                            <button type="button" class="prev-btn" onclick="prevStep()" disabled>
                                <i class="fas fa-arrow-right"></i> گام قبلی
                            </button>                             
                            <button type="button" class="next-btn" onclick="nextStep()">
                                <i class="fas fa-arrow-left"></i> گام بعدی
                            </button>                             
                            <button type="submit" class="submit-btn" style="display: none;">
                                <i class="fas fa-check"></i> ثبت نهایی
                            </button>                             
                        </div>                         
                    </div>                     
                    <!-- فرم چندمرحله‌ای کارفرما -->                     
                    <div id="client-form" style="display: none;"> 
                        <div class="progress-bar"> 
                            <div class="progress-step active">
                                <span class="step-label active">اطلاعات شخصی</span>
                            </div>                             
                            <div class="progress-step">
                                <span class="step-label">اطلاعات تماس</span>
                            </div>                             
                            <div class="progress-step">
                                <span class="step-label">اطلاعات شرکت</span>
                            </div>                             
                            <div class="progress-step">
                                <span class="step-label">آپلود مدارک</span>
                            </div>                             
                            <div class="progress-step">
                                <span class="step-label">تأیید</span>
                            </div>                             
                        </div>                         
                        <!-- مرحله 1: اطلاعات شخصی -->                         
                        <div class="step active" data-step="1"> 
                            <div class="step-content"> 
                                <div class="field-container"> 
                                    <label>نام:</label>                                     
                                    <div> 
                                        <input type="text" name="first_name" placeholder="نام (حداقل 2 حرف) *" required pattern="[آ-ی]{2,}"> 
                                        <div class="error" id="first_name_error">نام حداقل باید 2 حرف باشد</div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>نام خانوادگی:</label>                                     
                                    <div> 
                                        <input type="text" name="last_name" placeholder="نام خانوادگی (حداقل 2 حرف) *" required pattern="[آ-ی]{2,}"> 
                                        <div class="error" id="last_name_error">نام خانوادگی حداقل باید 2 حرف باشد</div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>تاریخ تولد:</label>                                     
                                    <div> 
                                        <input type="date" name="birth_date" placeholder="تاریخ تولد *" required> 
                                        <div class="error" id="birth_date_error">سن باید بالای 18 سال باشد</div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>جنسیت:</label>                                     
                                    <div class="gender-switch"> 
                                        <label> 
                                            <input type="checkbox" name="gender" id="gender_switch" onchange="updateGenderText()"> <span class="toggle"></span> <span class="toggle-text" id="gender-text">جنسیت: مرد</span> 
                                        </label>                                         
                                        <div class="error" id="gender_error">لطفاً جنسیت را انتخاب کنید</div>                                         
                                    </div>                                     
                                </div>                                 
                            </div>                             
                        </div>                         
                        <!-- مرحله 2: اطلاعات تماس -->                         
                        <div class="step" data-step="2"> 
                            <div class="step-content"> 
                                <div class="field-container"> 
                                    <label>شماره تماس:</label>                                     
                                    <div> 
                                        <input type="text" name="phone" placeholder="شماره تماس (مثال: 09123456789) *" required pattern="09[0-9]{9}"> 
                                        <div class="error" id="phone_error">شماره تماس باید 11 رقم و با 09 شروع شود</div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>ایمیل:</label>                                     
                                    <div> 
                                        <input type="email" name="email" placeholder="ایمیل *" required> 
                                        <div class="error" id="email_error">فرمت ایمیل نامعتبر است</div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container address-map-container"> 
                                    <div class="labels-row"> 
                                        <label>آدرس</label>                                         
                                    </div>                                     
                                    <div class="address-input"> 
                                        <textarea name="address" placeholder="آدرس محل سکونت (حداقل 10 کاراکتر) *" required minlength="10"></textarea> 
                                        <div class="error" id="address_error">آدرس حداقل باید 10 کاراکتر باشد</div>                                         
                                    </div>                                     
                                    <div class="map-container"> 
                                        <div id="client-map" class="map"></div>                                         
                                        <div class="location-info" id="client-location-info"></div>                                         
                                    </div>                                     
                                </div>                                 
                            </div>                             
                        </div>                         
                        <!-- مرحله 3: اطلاعات شرکت -->                         
                        <div class="step" data-step="3"> 
                            <div class="step-content"> 
                                <div class="field-container"> 
                                    <label> 
                                        <div class="checkbox-container"> 
                                            <input type="checkbox" id="has_company" name="has_company" onchange="toggleCompanyDetails()"> <span class="checkbox"></span> <span id="company_status_text">شرکت ثبت شده ندارم</span> 
                                        </div>                                         
                                    </label>                                     
                                    <div></div>                                     
                                </div>                                 
                                <div id="company_details" style="display: none;"> 
                                    <div class="field-container"> 
                                        <label>نام شرکت:</label>                                         
                                        <div> 
                                            <input type="text" name="company_name" placeholder="نام شرکت (حداقل 3 کاراکتر)"> 
                                            <div class="error" id="company_name_error">نام شرکت حداقل باید 3 کاراکتر باشد</div>                                             
                                        </div>                                         
                                    </div>                                     
                                    <div class="field-container"> 
                                        <label>شماره ثبت:</label>                                         
                                        <div> 
                                            <input type="text" name="company_reg_number" placeholder="شماره ثبت (حداقل 5 رقم)" pattern="[0-9]{5,}"> 
                                            <div class="error" id="company_reg_number_error">شماره ثبت حداقل باید 5 رقم باشد</div>                                             
                                        </div>                                         
                                    </div>                                     
                                    <div class="field-container address-map-container"> 
                                        <div class="labels-row"> 
                                            <label>آدرس شرکت</label>                                             
                                        </div>                                         
                                        <div class="address-input"> 
                                            <textarea name="company_address" placeholder="آدرس شرکت"></textarea> 
                                        </div>                                         
                                        <div class="map-container"> 
                                            <div id="company-map" class="map"></div>                                             
                                            <div class="location-info" id="company-location-info"></div>                                             
                                        </div>                                         
                                    </div>                                     
                                </div>                                 
                            </div>                             
                        </div>                         
                        <!-- مرحله 4: آپلود مدارک -->                         
                        <div class="step" data-step="4"> 
                            <div class="step-content"> 
                                <div class="field-container"> 
                                    <label>کارت ملی:</label>                                     
                                    <div> 
                                        <div class="file-upload" id="national_card_upload">
                                            <input type="file" name="national_card" accept=".jpg,.png,.pdf" required>کارت ملی (JPG, PNG, PDF) *
                                        </div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>شناسنامه (صفحه اول):</label>                                     
                                    <div> 
                                        <div class="file-upload" id="birth_cert_upload">
                                            <input type="file" name="birth_certificate" accept=".jpg,.png,.pdf" required>شناسنامه (صفحه اول) *
                                        </div>                                         
                                    </div>                                     
                                </div>                                 
                                <div class="field-container"> 
                                    <label>سایر مدارک:</label>                                     
                                    <div> 
                                        <div class="file-upload" id="extra_doc_upload">
                                            <input type="file" name="extra_docs" accept=".jpg,.png,.pdf">سایر مدارک
                                        </div>                                         
                                    </div>                                     
                                </div>                                 
                            </div>                             
                        </div>                         
                        <!-- مرحله 5: تأیید و ارسال -->                         
                        <div class="step" data-step="5"> 
                            <div class="step-content"> 
                                <div class="summary" id="summary"></div>                                 
                            </div>                             
                        </div>                         
                        <div class="nav-buttons"> 
                            <button type="button" class="prev-btn" onclick="prevStep()" disabled>
                                <i class="fas fa-arrow-right"></i> گام قبلی
                            </button>                             
                            <button type="button" class="next-btn" onclick="nextStep()">
                                <i class="fas fa-arrow-left"></i> گام بعدی
                            </button>                             
                            <button type="submit" class="submit-btn" style="display: none;">
                                <i class="fas fa-check"></i> ثبت نهایی
                            </button>                             
                        </div>                         
                    </div>                     
                </form>                 
            </div>             
        </div>         
        <script>
    let currentStep = 1;
    let isEngineer = true;
    let engineerMapResidence, engineerMapOffice, clientMap, companyMap;
    let engineerMarkerResidence, engineerMarkerOffice, clientMarker, companyMarker;

    // مدیریت منوی همبرگری
    function toggleMenu() {
      document.querySelector('.nav').classList.toggle('active');
    }

    // باز کردن مودال ثبت‌نام
    function openModal() {
      const isEngineer = document.getElementById('main-engineer-btn').classList.contains('active');
      document.getElementById('modal-title').textContent = isEngineer ? "خوش آمدید، مهندس گرامی!" : "خوش آمدید، کارفرمای گرامی!";
      document.getElementById('signupModal').style.display = 'flex';
    }

    // بستن مودال ثبت‌نام
    function closeSignupModal() {
      document.getElementById('signupModal').style.display = 'none';
    }

    // باز کردن مودال اطلاعات اضافی
    function openAdditionalInfoModal() {
      document.getElementById('additionalInfoModal').style.display = 'flex';
    }

    // بستن مودال اطلاعات اضافی
    function closeAdditionalInfoModal() {
      document.getElementById('additionalInfoModal').style.display = 'none';
    }

    // باز کردن مودال درج اطلاعات
    function openInsertModal() {
      isEngineer = document.getElementById('main-engineer-btn').classList.contains('active');
      document.getElementById('insert-modal-title').textContent = isEngineer ? "ثبت‌نام مهندس" : "ثبت‌نام کارفرما";
      document.getElementById('engineer-form').style.display = isEngineer ? 'block' : 'none';
      document.getElementById('client-form').style.display = isEngineer ? 'none' : 'block';
      document.getElementById('insertModal').style.display = 'flex';
      currentStep = 1;
      updateProgressBar();
      updateStepVisibility();
      initializeMaps();
    }

    // بستن مودال درج اطلاعات
    function closeInsertModal() {
      document.getElementById('insertModal').style.display = 'none';
      currentStep = 1;
      updateProgressBar();
      updateStepVisibility();
    }

    // ورود با گوگل
    function googleSignIn() {
      closeSignupModal();
      openInsertModal();
    }

    // مدیریت سوئیچ مهندس/کارفرما در محتوای اصلی
    document.getElementById('main-engineer-btn').addEventListener('click', function() {
      this.classList.add('active');
      document.getElementById('main-client-btn').classList.remove('active');
      document.getElementById('slogan-text').innerHTML = '<strong>نظام تندیس</strong> (تدارک نیازمندی دقیق و یکپارچه ساختمان) برای مهندسان مجری و کمک مجری';
      document.getElementById('advantage1').innerHTML = '<i class="fas fa-check"></i> دسترسی به پروژه‌های متنوع';
      document.getElementById('advantage2').innerHTML = '<i class="fas fa-check"></i> افزایش درآمد با پروژه‌های بیشتر';
      document.getElementById('advantage3').innerHTML = '<i class="fas fa-check"></i> مدیریت آسان پروژه‌ها';
      document.getElementById('step1-text').textContent = 'به عنوان مهندس ثبت‌نام کنید.';
      document.getElementById('step3-text').textContent = 'پروژه‌های مدنظر خود را پیدا کنید.';
      document.getElementById('step4-text').textContent = 'با کارفرما توافق کرده و پروژه را آغاز کنید.';
    });

    document.getElementById('main-client-btn').addEventListener('click', function() {
      this.classList.add('active');
      document.getElementById('main-engineer-btn').classList.remove('active');
      document.getElementById('slogan-text').innerHTML = '<strong>نظام تندیس</strong> (تدارک نیازمندی دقیق و یکپارچه ساختمان) برای کارفرمایان';
      document.getElementById('advantage1').innerHTML = '<i class="fas fa-check"></i> دسترسی به مهندسان حرفه‌ای';
      document.getElementById('advantage2').innerHTML = '<i class="fas fa-check"></i> صرفه‌جویی در زمان و هزینه';
      document.getElementById('advantage3').innerHTML = '<i class="fas fa-check"></i> تضمین کیفیت پروژه‌ها';
      document.getElementById('step1-text').textContent = 'به عنوان کارفرما ثبت‌نام کنید.';
      document.getElementById('step3-text').textContent = 'مهندسان مناسب را پیدا کنید.';
      document.getElementById('step4-text').textContent = 'با مهندس توافق کرده و پروژه را آغاز کنید.';
    });

    // مدیریت سوئیچ جنسیت
    function updateEngineerGenderText() {
      const isMale = document.getElementById('engineer_gender_switch').checked;
      document.getElementById('engineer_gender_text').textContent = `جنسیت: ${isMale ? 'زن' : 'مرد'}`;
    }

    function updateGenderText() {
      const isMale = document.getElementById('gender_switch').checked;
      document.getElementById('gender-text').textContent = `جنسیت: ${isMale ? 'زن' : 'مرد'}`;
    }

    // مدیریت سوئیچ‌های پروانه و شرکت
    function toggleDesignLicense() {
      const hasDesignLicense = document.getElementById('has_design_license').checked;
      const select = document.querySelector('select[name="design_license_grade"]');
      select.disabled = !hasDesignLicense;
      select.required = hasDesignLicense;
      if (!hasDesignLicense) select.value = '';
      document.getElementById('design_license_text').textContent = hasDesignLicense ? 'پروانه طراحی دارم' : 'پروانه طراحی ندارم';
    }

    function toggleSupervisionLicense() {
      const hasSupervisionLicense = document.getElementById('has_supervision_license').checked;
      const select = document.querySelector('select[name="supervision_license_grade"]');
      select.disabled = !hasSupervisionLicense;
      select.required = hasSupervisionLicense;
      if (!hasSupervisionLicense) select.value = '';
      document.getElementById('supervision_license_text').textContent = hasSupervisionLicense ? 'پروانه نظارت دارم' : 'پروانه نظارت ندارم';
    }

    function toggleExecutionLicense() {
      const hasExecutionLicense = document.getElementById('has_execution_license').checked;
      const select = document.querySelector('select[name="execution_license_grade"]');
      select.disabled = !hasExecutionLicense;
      select.required = hasExecutionLicense;
      if (!hasExecutionLicense) select.value = '';
      document.getElementById('execution_license_text').textContent = hasExecutionLicense ? 'پروانه اجرا دارم' : 'پروانه اجرا ندارم';
    }

    function toggleLegalEntity() {
      const isLegalEntity = document.getElementById('is_legal_entity').checked;
      document.getElementById('legal_entity_text').textContent = isLegalEntity ? 'مجری حقوقی' : 'مجری حقیقی';
      document.getElementById('legal-entity-details').style.display = isLegalEntity ? 'grid' : 'none';
    }

    function toggleCompanyDetails() {
      const hasCompany = document.getElementById('has_company').checked;
      document.getElementById('company_status_text').textContent = hasCompany ? 'شرکت ثبت شده دارم' : 'شرکت ثبت شده ندارم';
      document.getElementById('company_details').style.display = hasCompany ? 'grid' : 'none';
      if (hasCompany && !companyMap) {
        initializeCompanyMap();
      }
    }

    function initializeCompanyMap() {
      companyMap = L.map('company-map').setView([38.046, 46.35], 13);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(companyMap);
      companyMarker = L.marker([38.046, 46.35]).addTo(companyMap);
      companyMap.on('click', function(e) {
        companyMarker.setLatLng(e.latlng);
        updateLocationInfo('company', e.latlng);
      });
      updateLocationInfo('company', { lat: 38.046, lng: 46.35 });
    }

    // مدیریت مراحل فرم
    function updateProgressBar() {
      const progressSteps = document.querySelectorAll(isEngineer ? '#engineer-form .progress-step' : '#client-form .progress-step');
      const stepLabels = document.querySelectorAll(isEngineer ? '#engineer-form .step-label' : '#client-form .step-label');
      progressSteps.forEach((step, index) => {
        if (index < currentStep) {
          step.classList.add('active');
          stepLabels[index].classList.add('active');
        } else {
          step.classList.remove('active');
          stepLabels[index].classList.remove('active');
        }
      });
    }

    function updateStepVisibility() {
      const steps = document.querySelectorAll(isEngineer ? '#engineer-form .step' : '#client-form .step');
      steps.forEach((step, index) => {
        if (index + 1 === currentStep) {
          step.classList.add('active');
        } else {
          step.classList.remove('active');
        }
      });

      const prevBtn = document.querySelector(isEngineer ? '#engineer-form .prev-btn' : '#client-form .prev-btn');
      const nextBtn = document.querySelector(isEngineer ? '#engineer-form .next-btn' : '#client-form .next-btn');
      const submitBtn = document.querySelector(isEngineer ? '#engineer-form .submit-btn' : '#client-form .submit-btn');

      prevBtn.disabled = currentStep === 1;
      if (currentStep === (isEngineer ? 5 : 5)) {
        nextBtn.style.display
        'none';
        submitBtn.style.display = 'flex';
      } else {
        nextBtn.style.display = 'flex';
        submitBtn.style.display = 'none';
      }
    }

    function validateStep() {
      const currentStepElement = document.querySelector(isEngineer ? `#engineer-form .step[data-step="${currentStep}"]` : `#client-form .step[data-step="${currentStep}"]`);
      const inputs = currentStepElement.querySelectorAll('input[required]:not([style*="display: none"]), textarea[required]:not([style*="display: none"]), select[required]:not([style*="display: none"])');
      let isValid = true;

      inputs.forEach(input => {
        if (!input.checkValidity()) {
          isValid = false;
          const errorElement = document.getElementById(`${input.name}_error`);
          if (errorElement) errorElement.style.display = 'block';
          input.reportValidity();
        } else {
          const errorElement = document.getElementById(`${input.name}_error`);
          if (errorElement) errorElement.style.display = 'none';
        }
      });

      // اعتبارسنجی سن
      if (currentStep === 1) {
        const birthDateInput = document.querySelector(isEngineer ? 'input[name="engineer_birth_date"]' : 'input[name="birth_date"]');
        const birthDate = new Date(birthDateInput.value);
        const today = new Date();
        let age = today.getFullYear() - birthDate.getFullYear();
        const monthDiff = today.getMonth() - birthDate.getMonth();
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
          age--;
        }
        if (age < 18) {
          isValid = false;
          document.getElementById(isEngineer ? 'engineer_birth_date_error' : 'birth_date_error').style.display = 'block';
        }
      }

      return isValid;
    }

    function nextStep() {
      if (validateStep()) {
        currentStep++;
        updateProgressBar();
        updateStepVisibility();
        if (currentStep === 5) {
          displaySummary();
        }
      }
    }

    function prevStep() {
      currentStep--;
      updateProgressBar();
      updateStepVisibility();
    }

    function displaySummary() {
      const form = document.getElementById('insertForm');
      const formData = new FormData(form);
      const summaryElement = document.getElementById(isEngineer ? 'engineer-summary' : 'summary');
      summaryElement.innerHTML = '';

      formData.forEach((value, key) => {
        if (value && key !== 'license_image_front' && key !== 'license_image_back' && key !== 'membership_card' && key !== 'applicant_photo' && key !== 'national_card' && key !== 'birth_certificate' && key !== 'extra_docs') {
          const label = form.querySelector(`[name="${key}"]`).closest('.field-container')?.querySelector('label')?.textContent || key;
          const summaryItem = document.createElement('div');
          summaryItem.classList.add('summary-item');
          summaryItem.innerHTML = `<label>${label}:</label> <span>${value}</span>`;
          summaryElement.appendChild(summaryItem);
        }
      });
    }

    // مدیریت آپلود فایل
    document.querySelectorAll('.file-upload').forEach(upload => {
      const input = upload.querySelector('input[type="file"]');
      upload.addEventListener('dragover', (e) => {
        e.preventDefault();
        upload.classList.add('dragover');
      });
      upload.addEventListener('dragleave', () => {
        upload.classList.remove('dragover');
      });
      upload.addEventListener('drop', (e) => {
        e.preventDefault();
        upload.classList.remove('dragover');
        input.files = e.dataTransfer.files;
      });
      input.addEventListener('change', () => {
        if (input.files.length > 0) {
          upload.textContent = input.files[0].name;
        }
      });
    });

    // مدیریت نقشه‌ها
    function initializeMaps() {
      if (engineerMapResidence) engineerMapResidence.remove();
      if (engineerMapOffice) engineerMapOffice.remove();
      if (clientMap) clientMap.remove();
      if (companyMap) companyMap.remove();

      engineerMapResidence = L.map('engineer-map-residence').setView([38.046, 46.35], 13);
      engineerMapOffice = L.map('engineer-map-office').setView([38.046, 46.35], 13);
      clientMap = L.map('client-map').setView([38.046, 46.35], 13);
      companyMap = L.map('company-map').setView([38.046, 46.35], 13);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(engineerMapResidence);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(engineerMapOffice);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(clientMap);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(companyMap);

      engineerMarkerResidence = L.marker([38.046, 46.35]).addTo(engineerMapResidence);
      engineerMarkerOffice = L.marker([38.046, 46.35]).addTo(engineerMapOffice);
      clientMarker = L.marker([38.046, 46.35]).addTo(clientMap);
      companyMarker = L.marker([38.046, 46.35]).addTo(companyMap);

      engineerMapResidence.on('click', function(e) {
        engineerMarkerResidence.setLatLng(e.latlng);
        updateLocationInfo('engineer-residence', e.latlng);
      });

      engineerMapOffice.on('click', function(e) {
        engineerMarkerOffice.setLatLng(e.latlng);
        updateLocationInfo('engineer-office', e.latlng);
      });

      clientMap.on('click', function(e) {
        clientMarker.setLatLng(e.latlng);
        updateLocationInfo('client', e.latlng);
      });

      companyMap.on('click', function(e) {
        companyMarker.setLatLng(e.latlng);
        updateLocationInfo('company', e.latlng);
      });

      updateLocationInfo('engineer-residence', { lat: 38.046, lng: 46.35 });
      updateLocationInfo('engineer-office', { lat: 38.046, lng: 46.35 });
      updateLocationInfo('client', { lat: 38.046, lng: 46.35 });
      updateLocationInfo('company', { lat: 38.046, lng: 46.35 });
    }

    function updateLocationInfo(type, latlng) {
      const infoElement = document.getElementById(`${type}-location-info`);
      if (infoElement) {
        infoElement.textContent = `موقعیت: ${latlng.lat.toFixed(4)}, ${latlng.lng.toFixed(4)}`;
      }
    }

    // رویدادها
    document.getElementById('insert-btn').addEventListener('click', openInsertModal);
    document.getElementById('about-link').addEventListener('click', (e) => {
      e.preventDefault();
      document.getElementById('about-section').scrollIntoView({ behavior: 'smooth' });
    });
    document.getElementById('contact-link').addEventListener('click', (e) => {
      e.preventDefault();
      document.getElementById('contact-section').scrollIntoView({ behavior: 'smooth' });
    });

    // ارسال فرم اطلاعات اضافی
    document.getElementById('additionalInfoForm').addEventListener('submit', (e) => {
      e.preventDefault();
      closeAdditionalInfoModal();
    });

    // ارسال فرم درج اطلاعات
    document.getElementById('insertForm').addEventListener('submit', (e) => {
      e.preventDefault();
      if (validateStep()) {
        alert('اطلاعات با موفقیت ثبت شد!');
        closeInsertModal();
      }
    });

    // ارسال فرم کانتکت            
// ارسال فرم تماس
document.getElementById('contact-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form);
    const successMessage = document.getElementById('success-message');
    const errorMessage = document.getElementById('error-message');
    
    // مخفی کردن پیام‌های قبلی
    successMessage.style.display = 'none';
    errorMessage.style.display = 'none';
    
    // مخفی کردن تمام خطاها
    document.querySelectorAll('.error-message').forEach(el => {
        el.style.display = 'none';
    });
    
    // اعتبارسنجی فیلدها
    let isValid = true;
    
    // بررسی فیلدهای ضروری
    const requiredFields = [
        { id: 'subject', errorId: 'subject-error', message: 'لطفاً موضوع را وارد کنید' },
        { id: 'name', errorId: 'name-error', message: 'لطفاً نام و نام خانوادگی را وارد کنید' },
        { id: 'email', errorId: 'email-error', message: 'لطفاً ایمیل معتبر وارد کنید' },
        { id: 'mobile', errorId: 'mobile-error', message: 'لطفاً شماره موبایل معتبر وارد کنید (مثال: 09123456789)' },
        { id: 'message', errorId: 'message-error', message: 'لطفاً متن پیام را وارد کنید' }
    ];
    
    requiredFields.forEach(field => {
        const input = document.getElementById(field.id);
        const error = document.getElementById(field.errorId);
        
        if (!input.value.trim()) {
            isValid = false;
            error.textContent = field.message;
            error.style.display = 'block';
            input.style.borderColor = '#e74c3c';
        } else if (field.id === 'email' && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(input.value)) {
            isValid = false;
            error.textContent = 'فرمت ایمیل نامعتبر است';
            error.style.display = 'block';
            input.style.borderColor = '#e74c3c';
        } else if (field.id === 'mobile' && !/^09\d{9}$/.test(input.value)) {
            isValid = false;
            error.textContent = 'شماره موبایل باید با 09 شروع شود و 11 رقم باشد';
            error.style.display = 'block';
            input.style.borderColor = '#e74c3c';
        } else {
            input.style.borderColor = '#ddd';
        }
    });
    
    if (!isValid) {
        return;
    }
    
    // URL واقعی فرم گوگل (باید جایگزین شود)
    const googleFormUrl = 'https://docs.google.com/forms/u/0/d/e/1fRmG-qVta4kVFm2KP2nhtKIHqQOcJf5FMv0aiMRBHdw/formResponse';
    
    try {
        // ارسال داده به فرم گوگل
        await fetch(googleFormUrl, {
            method: 'POST',
            body: formData,
            mode: 'no-cors'
        });
        
        // نمایش پیام موفقیت و ریست فرم
        form.reset();
        successMessage.style.display = 'flex';
        
        // مخفی کردن پیام موفقیت بعد از 5 ثانیه
        setTimeout(() => {
            successMessage.style.display = 'none';
        }, 5000);
        
    } catch (error) {
        console.error('Error submitting form:', error);
        errorMessage.style.display = 'flex';
        
        // مخفی کردن پیام خطا بعد از 5 ثانیه
        setTimeout(() => {
            errorMessage.style.display = 'none';
        }, 5000);
    }
});
    </script>         
    </body>     
</html>
